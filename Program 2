##include <Servo.h>
Servo myservo;
#define servo 9

#define btn1 8
#define btn2 6

#define off 1
#define half 2
#define full 3

#define forwards 1
#define backwards 2



void setup() {
  Serial.begin(9600);
 
  //myservo.attach(servo); //Attach servo to pin 9

  pinMode(btn1, OUTPUT);
  pinMode(btn2, OUTPUT);

  Serial.println("Set-up");
}

void loop() {
  static int myspeed[] = {off, half, full, half};      //Speed array
  static int speedpos = 0;                                  //Sets where in speed array
  
  int btn1state = digitalRead(btn1);            //Direction Button
  int btn2state = digitalRead(btn2);            //Speed Button
  /*
  potent = analogRead(servo)                    //reads potentiometer
  scalepotent = map(potent, 0, 1023, 0, 180);   //scale servo to motor (0-180)
  */

  //Speed Array Shift
  if (btn2state == HIGH){               //Button 2 Pressed
    Serial.print("Shift:");
    if (speedpos < 3){                  //Position is w/in speed array
      speedpos = speedpos +1;
      //Serial.println("Up");
      //Serial.println(speedpos);
    }
    else if (speedpos >= 3){            //Position reset
      speedpos = 0;
      //Serial.println("Reset");
      //Serial.println(speedpos);
    }
  }
  
  //Direction Determination
  if (btn1state == LOW){                           //Button 1 Not Pressed => Forwards
    //Serial.println("Forwards");
    MotorSpeed(myspeed, speedpos, forwards);
  }
  else if (btn1state == HIGH){                    //Button 1 Pressed => Backwards
    //Serial.println("Backwards"); 
    MotorSpeed(myspeed, speedpos, backwards);
  }

  delay(10); //Bounce
}

void MotorSpeed(int myspeed[], int speedpos, int mydirection ){

  if(myspeed[speedpos] == off){                 //Turn Motor Off
    Serial.println("Off");
    //analogWrite(servo, 0);
  }
  else if(myspeed[speedpos] == half){          //Turn Motor On - Half Speed
    //Serial.println("Half");
    if (mydirection == forwards){              //Forwards - Half Speed
      Serial.println("Forwards Half Speed");
      //analogWrite(servo, 127);
    }
    else if(mydirection == backwards){        //Backwards - Half Speed
      Serial.println("Backwards Half Speed");
      //analogWrite(servo, -127);
    }
  }
  else if(myspeed[speedpos] == full){          //Turn Motor On - Full Speed
    //Serial.println("Full");
    if (mydirection == forwards){
      Serial.println("Forwards Full Speed");  //Forwards - Full Speed
      //analogWrite(servo, 255);
    }
    else if (mydirection == backwards){
      Serial.println("Backwards Full Speed"); //Backwards - Full Speed
      //analogWrite(servo, -255);
    }
  }
}
